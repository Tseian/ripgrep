# Refactor Repository for Multi-Platform Ripgrep Distribution

I will restructure the repository to support distributing platform-specific `ripgrep` binaries via npm, as requested.

## 1. Restructure Root Directory
- Move `packages/meta/index.js` to `./index.js`.
- Remove the `packages` directory.
- Update root `package.json`:
  - Set `"main": "index.js"`.
  - Add `optionalDependencies` for all platform-specific packages:
    - `@tse-ian/x64-darwin-ripgrep`
    - `@tse-ian/arm64-darwin-ripgrep`
    - `@tse-ian/x64-linux-ripgrep`
    - `@tse-ian/arm64-linux-ripgrep`
    - `@tse-ian/x64-win32-ripgrep`

## 2. Configure Platform Packages
For each directory in `vendor/ripgrep/`, I will create a `package.json` file with the following configuration:
- **Name**: `@tse-ian/<arch>-<platform>-ripgrep` (matching the folder name).
- **Version**: `0.0.1` (synced with root).
- **Main**: `ripgrep.node`.
- **OS/CPU**: Specific to the package (e.g., `os: ["darwin"], cpu: ["arm64"]`).
- **Files**: `["ripgrep.node", "rg", "rg.exe"]`.

Target directories:
- `vendor/ripgrep/arm64-darwin`
- `vendor/ripgrep/arm64-linux`
- `vendor/ripgrep/x64-darwin`
- `vendor/ripgrep/x64-linux`
- `vendor/ripgrep/x64-win32`

## 3. Create GitHub Action Workflow
- Create `.github/workflows/ci.yml`.
- Define a workflow that triggers on push.
- Steps:
  - Checkout code.
  - Setup Node.js.
  - Authenticate with npm (using `NPM_TOKEN` secret).
  - Iterate through `vendor/ripgrep/*` directories and run `npm publish --access public`.
  - Run `npm publish --access public` in the root directory.
